TEMPLATE LAYER

Templates control **how data is displayed**.

render variables by putting them inside
 {{   }} brackets

```html
<h1>{{ title }}</h1>
{% for student in students %}
    <p>{{ student.name }}</p>
{% endfor %}


Overview of Template Language

| Syntax  | Purpose           |
| ------- | ----------------- |
| `{{ }}` | Variables         |
| `{% %}` | Logic (loops, if) |
| `{# #}` | Comments          |



Built-in Tags

```html
{% if user.is_authenticated %}
    Hello {{ user.username }}
{% endif %}

{% for item in list %}
    {{ item }}
{% endfor %}

{% block content %}{% endblock %}
{% extends "base.html" %}
if
else

if
elif
else

if
BUILT-IN TAGS
Tag	Use
{% if %}	Conditions
Inbuilt functions in user model:
user.is_authenticated   user logged in or not
user.is_staff            staff user
user.is_superuser        Admin user
user.username            username
user.email               email

{% if user.is_authenticated %}
   <p> welcome,{{user.username}}!=</p>
{% else %}
   <p> Please log in </p>
<% end if%>

{% if user.profile_completed %}
    <p>Profile Complete </p>
{% else %}
    <p>Please complete your profile </p>
{% endif %}

{% if marks >= 75 %}
    <p>Distinction</p>

{% elif marks >= 40 %}
    <p>Pass</p>

{% else %}
    <p>Fail</p>
{% endif %}

{% if order.payment_status == "PAID" %}
    <p>Payment Successful</p>

{% elif order.payment_status == "PENDING" %}
    <p>Awaiting Payment</p>

{% else %}
    <p>Payment Failed</p>

{% endif %}

{% for %}	Loop
{% block %}	Template inheritance
{% extends %}	Extend base template
{% include %}	Include another template
{% url %}	Create dynamic URLs
{% csrf_token %}	Security token in forms
üéõÔ∏è Built-in Filters

```html
{{ name|upper }}
{{ bio|truncatewords:10 }}
{{ date|date:"Y-m-d" }}
{{ list|length }}


üßç Humanization (django.contrib.humanize)

Add in **INSTALLED_APPS**:

```python
'django.contrib.humanize',
```

Use in template:

```html
{% load humanize %}
{{ 10000|intcomma }}   <!-- 10,000 -->
{{ 3|ordinal }}        <!-- 3rd -->
{{ 45|naturaltime }}   <!-- 45 minutes ago -->
```

---

üõ†Ô∏è Custom Tags & Filters

Create folder:
üìÅ `myapp/templatetags/custom_tags.py`

```python
from django import template
register = template.Library()

@register.filter
def multiply(value, arg):
    return value * arg
```

Use in template:

```html
{% load custom_tags %}
{{ 5|multiply:3 }}
```

--- üìù FORMS IN DJANGO

Forms handle **user input + validation**.

### üîπ Simple Form

```python
from django import forms

class ContactForm(forms.Form):
    name = forms.CharField(max_length=100)
    email = forms.EmailField()
```

### üîπ ModelForm

```python
class StudentForm(forms.ModelForm):
    class Meta:
        model = Student
        fields = '__all__'
```

### üîπ View with Form

```python
def add_student(request):
    form = StudentForm(request.POST or None)
    if form.is_valid():
        form.save()
        return redirect('home')
    return render(request, 'form.html', {'form': form})
```

---

# üîê CSRF Token (Security)

Prevents **Cross-Site Request Forgery attacks**

In every POST form:

```html
<form method="post">
    {% csrf_token %}
    {{ form.as_p }}
</form>
```

Without CSRF ‚Üí Django blocks request ‚ùå

---

# üéØ Final Interview Summary

| Layer        | Purpose             |
| ------------ | ------------------- |
| View         | Logic handler       |
| URLConf      | Route mapping       |
| Template     | UI display          |
| Forms        | Input & validation  |
| CSRF         | Security            |
| CBV          | Reusable views      |
| Mixins       | Extra functionality |
| Filters/Tags | Template processing |

---

Certainly! Here's a detailed explanation of each topic related to Django templates, tailored for students learning web development:

---

## Template Layer in Django
The **template layer** is responsible for rendering HTML pages that are sent to the user's browser. It separates the presentation (UI) from the business logic, making your code cleaner and easier to maintain.

### Key Points:
- Templates are HTML files with special syntax.
- They display dynamic content passed from views.
- They allow inserting variables, controlling flow, and including reusable components.

---

## Forms
**Forms** in Django are used to handle user input, such as login, registration, or file uploads.

### Types:
- **Django Forms:** Manually created in Python code, providing validation and security.
- **Model Forms:** Automatically generated from models, simplifying form creation.

### Workflow:
1. Create a form class.
2. Render it in a template.
3. Handle submitted data in views.
4. Validate and process data.

---

 Overview of Template Language
Django's template language provides a way to embed dynamic content and logic into HTML.

 Basic Syntax:
- **Variables:** `{{ variable_name }}`
- **Tags:** `{% tag_name %}` for control structures like loops and conditionals.
- **Comments:** `{# comment #}`

 Common features:
- Variables display data.
- Tags control flow (`if`, `for`, `with`, etc.).
- Filters modify output (e.g., formatting dates).

---
 Built-in Tags and Filters
Django offers many pre-defined tags and filters:

 Tags:
- `{% if %}`: Conditional statements.
- `{% for %}`: Loop over lists.
- `{% include %}`: Include other templates.
- `{% url %}`: Generate URL from view name.
- `{% block %}` and `{% extends %}`: Template inheritance.

 Filters:
- `{{ value|lower }}`: Converts string to lowercase.
- `{{ date_value|date:"Y-m-d" }}`: Formats dates.
- `{{ number|add:"5" }}`: Adds numbers.
- `{{ value|length }}`: Gets length.

---

 Humanization
**Humanization** filters make data more readable.

### Examples:
- `{{ value|intcomma }}`: Adds commas to numbers (`1,000`).
- `{{ value|naturaltime }}`: Shows relative time (`3 minutes ago`).
- `{{ value|apnumber }}`: Converts numbers to words (`three`).

---

## Custom Tags and Filters
You can create your own tags and filters to extend Django's template language.

### Custom Filter Example:
```python
# templatetags/my_filters.py
from django import template

register = template.Library()

@register.filter
def multiply(value, arg):
    return value * arg
```
 Custom Tag Example:
```python
# templatetags/my_tags.py
from django import template

register = template.Library()

@register.simple_tag
def current_time(format_string):
    from datetime import datetime
    return datetime.now().strftime(format_string)
```

 Usage in template:
```django
{% load my_filters my_tags %}
{{ some_number|multiply:3 }}
{% current_time "%Y-%m-%d" %}
```

---

 CSRF Token
CSRF (Cross-Site Request Forgery)** protection is essential for security.

 Explanation:
- When you create forms that modify data (POST requests), Django requires a CSRF token.
- This token ensures the form is submitted from your site, preventing malicious attacks.

 How to use:
In your form, include:
```django
<form method="post">
  {% csrf_token %}
  <!-- form fields -->
</form>
```

Django automatically verifies the token on form submission.


## Summary
- The **template layer** separates presentation from logic.
- **Forms** handle user input securely.
- Django's **template language** includes variables, control tags, filters, and inheritance.
- Use **built-in tags and filters** to simplify rendering.
- **Humanization** filters improve readability.
- You can create **custom tags/filters** to extend functionality.
- Always include **CSRF tokens** in forms for security.



