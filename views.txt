
1Ô∏è‚É£ View Layer in Django

The View layer handles:
üëâ Receiving request
üëâ Processing logic
üëâ Returning response

Flow:
User ‚Üí URL ‚Üí View ‚Üí Response

Views live in `views.py`

2Ô∏è‚É£ View Functions (Function-Based Views)

Simplest type of view.

```python
from django.http import HttpResponse

def home(request):
    return HttpResponse("Welcome to Django!")
```
| Option       | Used For | Meaning                     |
| ------------ | -------- | --------------------------- |
| `null=True`  | Database | Column can store NULL       |
| `blank=True` | Forms    | Field can be empty in forms |

With template:

```python
# render is a shortcut function template+data and return an http response to the browser
from django.shortcuts import render,redirect
from django.shortcuts import get_object_or_404
def home(request):
    return render(request, "home.html",context)
    return redirect("/login/")
    post=get_object_or_404(Post,id=1)

 3Ô∏è‚É£ Handling HTTP Requests

A view handles **GET, POST, etc.**

```python

def contact(request):
    if request.method == "POST":
        name = request.POST.get("name")
        return HttpResponse(f"Hello {name}")
    return render(request, "contact.html")
```

| Method | Use           |
| ------ | ------------- |
| GET    | Retrieve data |
| POST   | Submit form   |
| PUT    | Update        |
| DELETE | Delete        |

---

4Ô∏è‚É£ URLConfs (URL Configuration)

Maps URL ‚Üí View

üìÅ `urls.py`

```python
from django.urls import path
from . import views

urlpatterns = [
    path('', views.home),
    path('contact/', views.contact),
]
```

With parameter:

```python
path('student/<int:id>/', views.student_detail)
```

```python
def student_detail(request, id):
    return HttpResponse(f"Student ID: {id}")
```

---

5Ô∏è‚É£ Shortcuts & Decorators

### üîπ Shortcuts

| Function            | Purpose                  |
| ------------------- | ------------------------ |
| render()            | Return HTML template     |
| redirect()          | Redirect to another URL  |
| get_object_or_404() | Fetch object or show 404 |

```python
from django.shortcuts import get_object_or_404
student = get_object_or_404(Student, id=1)
```

---

üîπ Decorators

Add extra functionality to views.

Login required
Permission required
user_passes_test
require_GET
require_POST
csrf_exempt  Cross site Request Forgery
csrf_protect
```python
from django.contrib.auth.decorators import login_required

@login_required
def dashboard(request):
    return render(request, "dashboard.html")
```

HTTP method restriction:

```python
from django.views.decorators.http import require_POST

@require_POST
def submit_form(request):
    ...
```

---

6Ô∏è‚É£ Request and Response Objects
browser ->sends request->django processes->send response->browser shows result

üîπ Request Object

Contains user data:

```python
request.method
Tells which http,method was used
def my_view(request):
   if request.method=="GET"
      return HttpResponse("This is GET Request")
request.GET

def search(request):
URL query parameters
   query=request.GET.get("class1")
   return HttpResponse(f"You searched for{query}")"
request.POST
contains form data sent using POST
def submit_form(request):
  if request.method=="POST":
     name=reqest.POST.get("name")
     return Httpresponase(f"Hello {name}")"
      n
request.FILES
used for file uploads
def upload(request):
   if request.method =="POST":
      file=request.FILES['myfile']
request.user
Represents the currently logged in user
def dashboard(request):
  if request.user.is_authenticated:
      return Httpresponse(f"welcome{request.user.username}")
request.session
session stores the data on server side for a specific user across multiple requets
def set_session(request):
   request.session['username']='student1'
   return HttpResponse("session data")

request.session.get()    get value safely
request.session.flush()   delete session completely
request.session.clear()    removes all session data
request.session.set_expiry(300)   5 mins


```

Example:

```python
name = request.GET.get("name")
```

---

### üîπ Response Types

| Response             | Use             |
| -------------------- | --------------- |
| HttpResponse         | Basic text/html |
| JsonResponse         | Return JSON     |
| HttpResponseRedirect | Redirect        |
| FileResponse         | Send file       |

from django.http import Httpesponse
def hello(request):
   return HttpResponse("Hello user")

from django.http import JsonResponse
def user_data(request):
    data={"status": "success",
           "user":"Admin"}
  return JsonResponse(data)

from django.http import HttpResponseRedirect
def old_page(request):
  return HttpResponseRedirect("/new-page/")

from django.http import FileResponse
def download_file(request):
   return FileResponse(open("report.pdf","rb"))

---

7Ô∏è‚É£ File Upload in Django

### Step 1: Model

```python
class Document(models.Model):
    file = models.FileField(upload_to='uploads/')
```

### Step 2: Form

```python
from django import forms
from .models import document
class DocumentForm(forms.ModelForm):
    class Meta:
        model = Document
        fields = ['file']
```

### Step 3: View

```python
def upload_file(request):
    if request.method == 'POST':
        form = DocumentForm(request.POST, request.FILES)
        if form.is_valid():
            form.save()
            return HttpResponse("File uploaded!")
    else:
        form = DocumentForm()
    return render(request, 'upload.html', {'form': form})
```

### Step 4: Template

```html
<form method="post" enctype="multipart/form-data">
    {% csrf_token %}
    {{ form.as_p }}
    <button type="submit">Upload</button>
</form>
```

### Step 5: settings.py

```python
MEDIA_URL = '/media/'
MEDIA_ROOT = BASE_DIR / 'media'
```

---

# üß± 8Ô∏è‚É£ Class-Based Views (CBVs)
It is a way to create views using python classes instead of functions
Reusable, organized views.

```python
from django.views import View
from django.http import HttpResponse

class HomeView(View):
    def get(self, request):
        return HttpResponse("Hello from CBV")
```

URL:

```python
path('', HomeView.as_view())
```

---

### üîπ Generic CBVs (Most Used)

| View       | Purpose                 |
| ---------- | ----------------------- |
| ListView   | Display list of objects |
| DetailView | Show single object      |
| CreateView | Add object              |
| UpdateView | Edit object             |
| DeleteView | Delete object           |
from django.views.generic import ListView
Class BookListView(ListView):
   model=Book
   template_name="book_list.html"
   context_object_name=' books'

from django.views.generic import DetailView
class BookDetailView(DetailView):
     model=Book
     template_name='book_detail.html"
from django.views.generic import CreateView

from django.views.generic import UpdateView
from django.views.generic import DeleteView

Example:

```python
from django.views.generic import ListView
from .models import Student

class StudentListView(ListView):
    model = Student
    template_name = "students.html"
```

---

9Ô∏è‚É£ Mixins in Django

Mixins add reusable behavior to CBVs.

### üîπ LoginRequiredMixin

```python
from django.contrib.auth.mixins import LoginRequiredMixin
from django.views.generic import ListView

class StudentListView(LoginRequiredMixin, ListView):
    model = Student
```

### üîπ Other Useful Mixins

| Mixin                   | Purpose                    |
| ----------------------- | -------------------------- |
| LoginRequiredMixin      | Only logged-in users       |
| PermissionRequiredMixin | Specific permission needed |
| UserPassesTestMixin     | Custom access logic        |

---

# üéØ Interview Summary Table

| Topic       | Key Point                           |
| ----------- | ----------------------------------- |
| View        | Handles request & returns response  |
| FBV         | Function-based simple views         |
| CBV         | Class-based reusable views          |
| URLConf     | URL ‚Üí View mapping                  |
| Shortcuts   | render, redirect, get_object_or_404 |
| Decorators  | Add authentication or rules         |
| Request     | Contains user input                 |
| Response    | Data returned to browser            |
| File Upload | Use request.FILES                   |
| Mixins      | Add features to CBVs                |

---

